<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>RFC1 - Prueba aislamiento</title>
  <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
</head>
<body class="p-4">
  <h3>RFC1 - Prueba de aislamiento (30s)</h3>

  <form th:action="@{/stats/rfc1/isolation/serializable}" method="post" style="display:inline-block; margin-right:10px;">
    <label>Cliente:</label>
    <select name="clienteId" class="form-control" required style="display:inline-block; width:250px; margin-right:8px;">
      <option value="">-- seleccione --</option>
      <th:block th:each="u : ${users}">
        <option th:value="${u.cedula}" th:text="${u.nombre + ' (' + u.cedula + ')'}"></option>
      </th:block>
    </select>
    <button class="btn btn-danger mt-2" type="submit">Ejecutar (SERIALIZABLE)</button>
  </form>

  <form th:action="@{/stats/rfc1/isolation/read_committed}" method="post" style="display:inline-block;">
    <input name="clienteId" th:value="${users != null && users.size() > 0 ? users[0].cedula : ''}" />

    <label style="display:block; margin-top:10px;">O use el mismo selector arriba y presione el botón deseado.</label>
    <button class="btn btn-danger mt-2" type="submit">Ejecutar (READ_COMITTED)</button>
  </form>

  <p class="mt-3 text-muted">
    NOTA: abre otra pestaña para ejecutar RF8 (crear un servicio) mientras esta petición está en espera (30s).
    Luego revisa los resultados que aparecen abajo (antes y después).
  </p>

  <a th:href="@{/stats}" class="btn btn-secondary mt-2">Volver a Estadísticas</a>
</body>
</html>
